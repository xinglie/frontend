/*!1.0.2 kooboy_li@163.com*/
import e from"../../lib/magix.js";import t from"../mx-dragdrop/index.js";e.applyStyle("fea",'[mx-view*="/mx-slider/index"]{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fef{height:2px}.feg,.fef{background:#fff;cursor:pointer}.feg{width:8px;height:8px;top:-3px;margin-left:-4px}.feg,.feg:before{border-radius:50%;position:absolute}.feg:before{content:" ";width:12px;height:12px;left:-2px;top:-2px;background:hsla(0,0%,100%,.4)}.feh{background:#88cbfb;height:2px;position:absolute;top:0}.fei{background:#999;height:2px}');export default e.View.extend({tmpl:(e,t,i,s)=>{let o,n,l=[],{id:r,buffer:d,bufferValue:h,value:p}=e;return o=[],d&&(n=[t("div",{class:"fei",style:"width:"+s(100*h)+"%"})],o.push(...n)),o.push(t("div",{class:"feh",style:"width:"+s(100*p)+"%"})),l.push(t("div",{class:"fef",id:"t_"+s(r),"mx-click":i+"\x1e_l()"},o),t("div",{class:"feg",style:"left:"+s(100*p)+"%","mx-mousedown":i+"\x1e_m()"})),t(i,0,l)},mixins:[t],init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()},"_l<click>"(t){let i=t.eventTarget.getBoundingClientRect(),s=(t.pageX-i.left)/i.width;this.digest({value:s}),e.dispatch(this.root,"change",{percent:s})},"_m<mousedown>"(t){let i=e.node("t_"+this.id).getBoundingClientRect(),s=this.get("value")||0;this._g(t,o=>{let n=(o.pageX-t.pageX)/i.width+s;n>1?n=1:n<0&&(n=0),this.digest({value:n}),e.dispatch(this.root,"update",{percent:n})},()=>{e.dispatch(this.root,"change",{percent:this.get("value")})})}});