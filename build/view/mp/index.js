/*!1.0.2 kooboy_li@163.com*/
import"./channels.js";import"../../gallery/mx-slider/index.js";import"./time.js";import"./lyric.js";let e,t,i,s={class:"feH fed"},o={class:"feF"},r={class:"feJ",scrollamount:"1"},a={class:"feK"},f={class:"fed feM"},l={class:"feN"},n={class:"fed feT"};import p from"../../lib/magix.js";import c from"./player.js";p.applyStyle("fec",".fex{position:relative;color:#fff;height:60px;top:60px;transition:top .3s}.fey{position:absolute;top:-230px;background:rgba(60,64,73,.8);height:230px;width:100%;transition:all .3s;overflow:auto}.fez{top:0}.feA{padding:4px}.feB{width:98px;float:left;height:110px;text-align:center;cursor:pointer;border:1px solid transparent;border-radius:5px}.feB:hover{opacity:.6;border-color:hsla(0,0%,100%,.2)}.feC{border-color:#fff}.feC:hover{opacity:1;border-color:#fff}.feD{display:inline-flex;align-items:center;width:88px;height:80px}.feE{width:auto;height:auto;max-width:100%;max-height:100%}.feF{float:left;width:220px}.feG{width:56px;height:56px;border:1px solid #777;margin:2px;float:left}.feH{height:100%;background:#333;position:relative;z-index:2;overflow:hidden}.feI,.feJ{margin:5px 10px 0;float:left;width:140px}.feI{cursor:pointer}.feI:hover{opacity:.6}.feK{float:left;padding:4px;width:480px}.feL{float:right;width:300px;text-align:center}.feM{height:30px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.feN{font-size:12px;display:inline-block;margin:5px 5px 0}@-webkit-keyframes fea{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes fea{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.feO{font-size:22px;float:left;padding:2px;border:1px solid transparent;cursor:pointer;border-radius:4px}.feO:hover{opacity:.6;border-color:#fff}.feP{-webkit-animation:fea 1.8s linear infinite;animation:fea 1.8s linear infinite}.feP:hover{opacity:1;border-color:transparent}.feQ{cursor:not-allowed;color:#8a8a8a}.feQ:hover{border-color:transparent}.feR{width:390px;float:left;margin-top:10px}.feS{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.feT{float:right;margin-right:90px}.feU{width:80px;margin:13px 0 0 5px;float:left}.feV{font-size:12px;margin-left:10px}.feW{font-size:12px;opacity:.6;line-height:20px;color:#afafaf;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:20px;overflow:hidden}.feX{font-weight:700;font-size:14px;opacity:1;color:#fff}.feY{margin-left:15px}");export default p.View.extend({tmpl:(p,c,h,d,m,x,g)=>{let u,_,v,w,b,k,y,z,C,I,O=[],{active:j,cshow:H,song:D,undo:E,ptip:F,buffer:G,play:J,ntip:K,mode:q,error:B,volume:P}=p;return u="fey",j&&!H&&(u+=" fez"),_=[c("div",{"mx-view":"~fe/view/mp/channels","mx-change":h+"\x1e_q()",class:u})],v=[],j&&(b=[c("img",{class:"feG",src:d(D.picture)},0,1)],k=[c(0,0,"\u5206\u7c7b\uff1a"+d(j.name))],b.push(c("div",{class:"feI","mx-click":h+"\x1e_G()"},k)),k=[c(0,0,d(D.title)+"-"+d(D.artist))],b.push(c("marquee",r,k)),w=[c("div",o,b)],k=[],z=[c(0,0,"\ue600")],u="fee feO feS",E||(u+=" feQ"),k.push(c("i",{"mx-click":E&&h+"\x1e_H()",title:d(F),class:u},z)),G?(e?z=[e]:(C=[c(0,0,"\ue613")],z=[e=c("i",{_:"_",class:"fee feO feP"},C)]),k.push(...z)):(y="",C=[c(0,0,y+=J?" \ue62d ":" \ue6aa ")],I="\u70b9\u51fb",z=[c("i",{class:"fee feO","mx-click":h+"\x1e_F()",title:I+=J?"\u6682\u505c":"\u64ad\u653e"},C)],k.push(...z)),z=[c(0,0,"\ue600")],k.push(c("i",{class:"fee feO","mx-click":h+"\x1e_s()",title:d(K)},z)),y="",z=[c(0,0,y+="rdm"==q?" \ue6cd ":" \ue61e ")],I="\u6b63\u5728",I+="rdm"==q?"\u968f\u673a\u64ad\u653e":"\u5355\u66f2\u5faa\u73af",k.push(c("i",{class:"fee feO feY","mx-click":h+"\x1e_K()",title:I},z)),y="",B?y+=" "+d(B)+" ":J||G||(y+=" \u70b9\u51fb\u64ad\u653e\u6309\u94ae\u7ee7\u7eed "),z=[c(0,0,y)],k.push(c("span",l,z)),C=[c(0,0,"\ue829")],z=[c("i",{_:"a",class:"fee feO fe_","mx-click":h+"\x1e_J()"},C),c("div",{$:"volume",class:"feU","mx-update":h+"\x1e_E()","mx-change":h+"\x1e_E()","mx-view":"~fe/gallery/mx-slider/index?value="+g(x,P,"\x1eb")})],k.push(c("div",n,z)),b=[c("div",f,k)],t?b.push(t):b.push(t=c("div",{_:"b","mx-view":"~fe/view/mp/time",class:"fed"})),w.push(c("div",a,b)),i?w.push(i):w.push(i=c("div",{_:"c","mx-view":"~fe/view/mp/lyric",class:"feL"})),v.push(...w)),_.push(c("div",s,v)),u="fex",j&&(u+=" fez"),O.push(c("div",{class:u},_)),c(h,0,O)},init(){c.on("_r",()=>{if("rdm"==this.get("mode")){let e=this.get("active");c._s(e.channel_id)}else c._t()}),c.on("_u",e=>{let t={};p.has(e,"play")&&(t.play=e.play),p.has(e,"buffer")&&(t.buffer=e.buffer),this.digest(t)}),c.on("_v",this.render.bind(this)),c.on("_w",e=>{this.digest({song:e.song})}),this.set({cshow:!1,volume:1,mode:"rdm"})},render(){this.digest({ptip:c._x(),ntip:c._y(),undo:c._z()})},_C(){this.get("play")?c._A():c._B()},"_q<change>"(e){this.set({active:e.channel}),c._s(e.channel.channel_id,!0)},"_E<update,change>"(e){c._D(e.percent)},"_F<click>"(){this._C()},"_G<click>"(){this.digest({cshow:!this.get("cshow")})},"_s<click>"(){let e=this.get("active");c._s(e.channel_id)},"_H<click>"(){c._H()},"_J<click>"(){if(p.has(this,"_I")){let e=this._I;delete this._I,this.digest({volume:e}),c._D(e)}else{this._I=this.get("volume");let e=0;this.digest({volume:e}),c._D(e)}},"_K<click>"(){"rdm"==this.get("mode")?this.digest({mode:"circle"}):this.digest({mode:"rdm"})},"$doc<keyup>"(e){let t=this.get("active");t&&(13==e.keyCode?this._C():80==e.keyCode?c._H():78==e.keyCode?c._s(t.channel_id):67==e.keyCode&&this.digest({cshow:!this.get("cshow")}))}});