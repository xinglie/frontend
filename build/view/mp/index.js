/*!1.0.2 kooboy_li@163.com*/
import"./channels.js";import"../../gallery/mx-slider/index.js";import"./time.js";import"./lyric.js";let e,t,i={class:"feE fed"},s={class:"feC"},l={class:"feG",scrollamount:"2"},o={class:"feH"},f={class:"fed feJ"},r={class:"feK"},a={class:"fed feP"};import p from"../../lib/magix.js";import n from"./player.js";p.applyStyle("fec",".fex{position:relative;color:#fff;height:60px;top:60px;transition:top .3s}.fey{position:absolute;top:-240px;background:rgba(60,64,73,.8);height:240px;width:100%;transition:all .3s;overflow:auto}.fez{top:0}.feA{width:120px;float:left;height:120px;text-align:center;padding-top:14px;cursor:pointer}.feA:hover{opacity:.6}.feB{width:70px;height:70px}.feC{float:left;width:220px}.feD{width:56px;height:56px;border:1px solid #777;margin:2px;float:left}.feE{height:100%;background:#333;position:relative;z-index:2;overflow:hidden}.feF,.feG{margin:5px 10px 0;float:left;width:140px}.feF{cursor:pointer}.feF:hover{opacity:.6}.feH{float:left;padding:4px;width:480px}.feI{float:right;width:300px;text-align:center}.feJ{height:30px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.feK{font-size:12px;display:inline-block;margin:5px 5px 0}.feL{font-size:22px;float:left;padding:2px;border:1px solid transparent;cursor:pointer}.feL:hover{opacity:.6;border-color:#fff;border-radius:4px}.feM{cursor:not-allowed;color:#8a8a8a}.feM:hover{border-color:transparent}.feN{width:390px;float:left;margin-top:10px}.feO{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.feP{float:right;margin-right:90px}.feQ{width:100px;margin:13px 0 0 5px;float:left}.feR{font-size:12px;margin-left:10px}.feS{font-size:12px;opacity:.6;line-height:20px;color:#afafaf;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:20px;overflow:hidden}.feT{font-weight:700;font-size:14px;opacity:1;color:#fff}.feU{margin-left:15px}");export default p.View.extend({tmpl:(p,n,c,h,d,x,m)=>{let g,_,u,v,w,y,k,b,z,C,q=[],{active:L,cshow:j,song:F,undo:H,ptip:I,play:D,ntip:E,mode:G,error:J,volume:K}=p;return g="fey",L&&!j&&(g+=" fez"),_=[n("div",{"mx-view":"~fe/view/mp/channels","mx-change":c+"\x1e_p()",class:g})],u=[],L&&(w=[n("img",{class:"feD",src:h(F.picture)},0,1)],y=[n(0,0,"\u5206\u7c7b\uff1a"+h(L.name))],w.push(n("div",{class:"feF","mx-click":c+"\x1e_G()"},y)),y=[n(0,0,h(F.title)+"-"+h(F.artist))],w.push(n("marquee",l,y)),v=[n("div",s,w)],b=[n(0,0,"\ue600")],g="fee feL feO",H||(g+=" feM"),y=[n("i",{"mx-click":H&&c+"\x1e_H()",title:h(I),class:g},b)],k="",b=[n(0,0,k+=D?" \ue62d ":" \ue6aa ")],z="\u70b9\u51fb",z+=D?"\u6682\u505c":"\u64ad\u653e",y.push(n("i",{class:"fee feL","mx-click":c+"\x1e_F()",title:z},b)),b=[n(0,0,"\ue600")],y.push(n("i",{class:"fee feL","mx-click":c+"\x1e_q()",title:h(E)},b)),k="",b=[n(0,0,k+="rdm"==G?" \ue6cd ":" \ue61e ")],z="\u6b63\u5728",z+="rdm"==G?"\u968f\u673a\u64ad\u653e":"\u5355\u66f2\u5faa\u73af",y.push(n("i",{class:"fee feL feU","mx-click":c+"\x1e_K()",title:z},b)),k="",J?k+=" "+h(J)+" ":D||(k+=" \u70b9\u51fb\u64ad\u653e\u6309\u94ae\u7ee7\u7eed "),b=[n(0,0,k)],y.push(n("span",r,b)),C=[n(0,0,"\ue829")],b=[n("i",{_:"_",class:"fee feL fe_","mx-click":c+"\x1e_J()"},C),n("div",{$:"volume",class:"feQ","mx-update":c+"\x1e_E()","mx-change":c+"\x1e_E()","mx-view":"~fe/gallery/mx-slider/index?value="+m(x,K,"\x1eb")})],y.push(n("div",a,b)),w=[n("div",f,y)],e?w.push(e):w.push(e=n("div",{_:"a","mx-view":"~fe/view/mp/time",class:"fed"})),v.push(n("div",o,w)),t?v.push(t):v.push(t=n("div",{_:"b","mx-view":"~fe/view/mp/lyric",class:"feI"})),u.push(...v)),_.push(n("div",i,u)),g="fex",L&&(g+=" fez"),q.push(n("div",{class:g},_)),n(c,0,q)},init(){let e=()=>{if("rdm"==this.get("mode")){let e=this.get("active");n._q(e.channel_id)}else n._r()};n.on("_s",e),n.on("_t",e),n.on("_u",e=>{this.digest({play:e.play})}),n.on("_v",this.render.bind(this)),n.on("_w",e=>{this.digest({song:e.song})}),this.set({cshow:!1,volume:1,mode:"rdm"})},render(){this.digest({ptip:n._x(),ntip:n._y(),undo:n._z()})},_C(){this.get("play")?n._A():n._B()},"_p<change>"(e){this.set({active:e.channel}),n._q(e.channel.channel_id,!0)},"_E<update,change>"(e){n._D(e.percent)},"_F<click>"(){this._C()},"_G<click>"(){this.digest({cshow:!this.get("cshow")})},"_q<click>"(){let e=this.get("active");n._q(e.channel_id)},"_H<click>"(){n._H()},"_J<click>"(){if(p.has(this,"_I")){let e=this._I;delete this._I,this.digest({volume:e}),n._D(e)}else{this._I=this.get("volume");let e=0;this.digest({volume:e}),n._D(e)}},"_K<click>"(){"rdm"==this.get("mode")?this.digest({mode:"circle"}):this.digest({mode:"rdm"})},"$doc<keyup>"(e){let t=this.get("active");t&&(13==e.keyCode?this._C():80==e.keyCode?n._H():78==e.keyCode&&n._q(t.channel_id))}});