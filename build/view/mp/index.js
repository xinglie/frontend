/*!1.0.2 kooboy_li@163.com*/
import"./channels.js";import"./volume.js";import"./time.js";import"./lyric.js";let e,t,i,a,r,s={class:"feI fed"},o={class:"feF"},n={class:"feL"},f={class:"fed feN"},l={class:"feO"};import p from"../../lib/magix.js";import d from"./player.js";p.applyStyle("fec",".fex{position:relative;color:#fff;height:60px;top:60px;transition:top .3s}.fey{position:absolute;top:-230px;background:rgba(60,64,73,.8);height:230px;width:100%;transition:all .3s;overflow:auto}.fez{top:0}.feA{padding:4px}.feB{width:98px;float:left;height:110px;text-align:center;cursor:pointer;border:1px solid transparent;border-radius:5px}.feB:hover{opacity:.6;border-color:hsla(0,0%,100%,.2)}.feC{border-color:#fff}.feC:hover{opacity:1;border-color:#fff}.feD{display:inline-flex;align-items:center;width:88px;height:80px}.feE{width:auto;height:auto;max-width:100%;max-height:100%}.feF{float:left;width:220px}.feG{width:56px;height:56px;border:1px solid #fff;margin:2px;float:left;background-size:cover;background-repeat:no-repeat}.feH{width:8px;height:8px;background:#333;border-radius:50%;margin:50%;-webkit-transform:translate(-4px,-4px);transform:translate(-4px,-4px);box-shadow:0 0 0 3px hsla(0,0%,100%,.73)}.feI{height:100%;background:#333;position:relative;z-index:2;overflow:hidden}.feJ,.feK{margin:5px 10px 0;float:left;width:130px;overflow:hidden}.feJ{cursor:pointer}.feJ:hover{opacity:.6}.feL{float:left;padding:4px;width:480px}.feM{float:right;width:300px;text-align:center}.feN{height:30px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.feO{font-size:12px;display:inline-block;margin:5px 5px 0}@-webkit-keyframes fea{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes fea{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.feG{border-radius:50%;-webkit-animation:fea 8s linear infinite;animation:fea 8s linear infinite;border-width:3px;cursor:pointer}.feP{font-size:22px;float:left;padding:2px;border:1px solid transparent;cursor:pointer;border-radius:4px}.feP:hover{opacity:.6;border-color:#fff}.feQ{-webkit-animation:fea 1.8s linear infinite;animation:fea 1.8s linear infinite}.feQ:hover{opacity:1;border-color:transparent}.feR{cursor:not-allowed;color:#8a8a8a}.feR:hover{border-color:transparent}.feS{width:390px;float:left;margin-top:9px}.feT{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.feU{float:right;margin-right:51px}.feV{font-size:12px;margin-left:10px;margin-top:5px;display:inline-block;width:21px}.feW{width:80px;margin:13px 0 0 5px;float:left}.feX{font-size:12px;margin-left:10px}.feY{font-size:12px;opacity:.6;line-height:20px;color:#afafaf;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:20px;overflow:hidden}.feZ{font-weight:700;font-size:14px;opacity:1;color:#fff}.fea_{margin-left:15px}@-webkit-keyframes feb{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(-100%);transform:translate(-100%)}}@keyframes feb{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(-100%);transform:translate(-100%)}}.feaa{display:inline-block;padding-left:100%;white-space:nowrap;-webkit-animation:feb 20s linear infinite;animation:feb 20s linear infinite}.feab{-webkit-animation-play-state:paused;animation-play-state:paused}.feac{-webkit-animation-name:none;animation-name:none;padding-left:0}");export default p.View.extend({tmpl:(p,d,c,h)=>{let m,x,g,u,b,w,_,k,v,y,z=[],{active:P,cshow:j,buffer:q,song:B,play:C,reset:D,undo:A,ptip:G,ntip:J,mode:E,error:F}=p;if(m="fey",P&&!j&&(m+=" fez"),x=[d("div",{"mx-view":"~fe/view/mp/channels","mx-change":c+"\x1e_o()",class:m})],g=[],P){let s=q||!B.picture||!C;_=e?[e]:[e=d("div",{_:"_",class:"feH"})],m="feG",s&&(m+=" feab"),D&&(m+=" feac"),b=[d("div",{"mx-click":!q&&B.picture&&c+"\x1e_B()",style:null!=B.picture&&"background-image:url("+h(B.picture)+")",class:m},_)],_=[d(0,0,"\u5206\u7c7b\uff1a"+h(P.name))],b.push(d("div",{class:"feJ","mx-click":c+"\x1e_C()"},_)),k=[d(0,0,h(B.title)+"<"+h(B.artist)+">")],m="feaa",s&&(m+=" feab"),D&&(m+=" feac"),_=[d("span",{class:m},k)],b.push(d("div",{class:"feK",title:h(B.title)+"<"+h(B.artist)+">"},_)),u=[d("div",o,b)],_=[],k=[d(0,0,"\ue600")],m="fee feP feT",A||(m+=" feR"),_.push(d("i",{"mx-click":A&&c+"\x1e_D()",title:h(G),class:m},k)),q?(t?k=[t]:(v=[d(0,0,"\ue613")],k=[t=d("i",{_:"a",class:"fee feP feQ"},v)]),_.push(...k)):(w="",v=[d(0,0,w+=C?" \ue62d ":" \ue6aa ")],y="\u70b9\u51fb",k=[d("i",{class:"fee feP","mx-click":c+"\x1e_B()",title:y+=C?"\u6682\u505c":"\u64ad\u653e"},v)],_.push(...k)),k=[d(0,0,"\ue600")],_.push(d("i",{class:"fee feP","mx-click":c+"\x1e_q()",title:h(J)},k)),w="",k=[d(0,0,w+="rdm"==E?" \ue6cd ":" \ue61e ")],y="\u6b63\u5728",y+="rdm"==E?"\u968f\u673a\u64ad\u653e":"\u5355\u66f2\u5faa\u73af",_.push(d("i",{class:"fee feP fea_","mx-click":c+"\x1e_E()",title:y},k)),w="",F?w+=" "+h(F)+" ":C||q||(w+=" \u70b9\u51fb\u64ad\u653e\u6309\u94ae\u7ee7\u7eed "),k=[d(0,0,w)],_.push(d("span",l,k)),i?_.push(i):_.push(i=d("div",{_:"b","mx-view":"~fe/view/mp/volume",class:"fed feU"})),b=[d("div",f,_)],a?b.push(a):b.push(a=d("div",{_:"c","mx-view":"~fe/view/mp/time",class:"fed"})),u.push(d("div",n,b)),r?u.push(r):u.push(r=d("div",{_:"d","mx-view":"~fe/view/mp/lyric",class:"feM"})),g.push(...u)}return x.push(d("div",s,g)),m="fex",P&&(m+=" fez"),z.push(d("div",{class:m},x)),d(c,0,z)},init(){d.on("_p",()=>{if("rdm"==this.get("mode")){let e=this.get("active");d._q(e.channel_id)}else d._r()}),d.on("_s",e=>{let t={};p.has(e,"play")&&(t.play=e.play),p.has(e,"buffer")&&(t.buffer=e.buffer),this.digest(t)}),d.on("_t",()=>{this.set({reset:!1}),this.render()}),d.on("_u",e=>{this.digest({reset:!0,song:e.song})}),this.set({cshow:!1,reset:!0,mode:"rdm",song:{title:"\u8f6f\u4ef6\u4f5c\u8005",artist:"\u884c\u5217"}})},render(){this.digest({ptip:d._v(),ntip:d._w(),undo:d._x()})},_A(){this.get("play")?d._y():d._z()},"_o<change>"(e){this.digest({active:e.channel}),d._q(e.channel.channel_id,!0)},"_B<click>"(){this._A()},"_C<click>"(){this.digest({cshow:!this.get("cshow")})},"_q<click>"(){let e=this.get("active");d._q(e.channel_id)},"_D<click>"(){d._D()},"_E<click>"(){"rdm"==this.get("mode")?this.digest({mode:"circle"}):this.digest({mode:"rdm"})},"$doc<keyup>"(e){if(d._F()){let t=e.keyCode;if(13==t||32==t)this._A();else if(80==t)d._D();else if(78==t){let e=this.get("active");d._q(e.channel_id)}else 67==t&&this.digest({cshow:!this.get("cshow")})}},"$doc<visibilitychange>"(){d._G(document.hidden)}});