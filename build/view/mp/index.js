/*!1.0.2 kooboy_li@163.com*/
import"./channels.js";import"./volume.js";import"./time.js";import"./lyric.js";let e,t,i,a,r,s={class:"feI fed"},o={class:"feF"},n={class:"feab"},f={class:"feL"},l={class:"fed feN"},p={class:"feO"};import d from"../../lib/magix.js";import c from"./player.js";d.applyStyle("fec",".fex{position:relative;color:#fff;height:60px;top:60px;-webkit-transition:top .3s;transition:top .3s}.fey{position:absolute;top:-230px;background:rgba(60,64,73,.8);height:230px;width:100%;-webkit-transition:all .3s;transition:all .3s;overflow:auto}.fez{top:0}.feA{padding:4px}.feB{width:98px;float:left;height:110px;text-align:center;cursor:pointer;border:1px solid transparent;border-radius:5px}.feB:hover{opacity:.6;border-color:hsla(0,0%,100%,.2)}.feC{border-color:#fff}.feC:hover{opacity:1;border-color:#fff}.feD{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;width:88px;height:80px}.feE{width:auto;height:auto;max-width:100%;max-height:100%}.feF{float:left;width:220px}.feG{width:56px;height:56px;border:1px solid #fff;margin:2px;float:left;background-size:cover;background-repeat:no-repeat}.feH{width:8px;height:8px;background:#555;border-radius:50%;margin:50%;-webkit-transform:translate(-4px,-4px);transform:translate(-4px,-4px);box-shadow:0 0 0 3px hsla(0,0%,100%,.73)}.feI{height:100%;background:#333;position:relative;z-index:2;overflow:hidden}.feJ,.feK{margin:5px 10px 0;float:left;width:130px;overflow:hidden}.feJ{cursor:pointer}.feJ:hover{opacity:.6}.feL{float:left;padding:4px;width:480px}.feM{float:right;width:300px;text-align:center}.feN{height:30px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.feO{font-size:12px;display:inline-block;margin:5px 5px 0}@-webkit-keyframes fea{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes fea{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.feG{border-radius:50%;-webkit-animation:fea 8s linear infinite;animation:fea 8s linear infinite;border-width:3px;cursor:pointer}.feP{font-size:22px;float:left;padding:2px;border:1px solid transparent;cursor:pointer;border-radius:4px}.feP:hover{opacity:.6;border-color:#fff}.feQ{-webkit-animation:fea 1.8s linear infinite;animation:fea 1.8s linear infinite}.feQ:hover{opacity:1;border-color:transparent}.feR{cursor:not-allowed;color:#8a8a8a}.feR:hover{border-color:transparent}.feS{width:390px;float:left;margin-top:9px}.feT{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.feU{float:right;margin-right:51px}.feV{font-size:12px;margin-left:10px;margin-top:5px;display:inline-block;width:21px}.feW{width:80px;margin:13px 0 0 5px;float:left}.feX{font-size:12px;margin-left:10px}.feY{font-size:12px;opacity:.6;line-height:20px;color:#afafaf;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:20px;overflow:hidden}.feZ{font-weight:700;font-size:14px;opacity:1;color:#fff}.fea_{margin-left:15px}@-webkit-keyframes feb{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(-50%);transform:translate(-50%)}}@keyframes feb{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(-50%);transform:translate(-50%)}}.feaa{-webkit-animation:feb 20s linear infinite;animation:feb 20s linear infinite;border-spacing:0;display:table}.feab{white-space:nowrap;min-width:130px;display:table-cell}.feac{-webkit-animation-play-state:paused;animation-play-state:paused}.fead{-webkit-animation-name:none;animation-name:none;padding-left:0}");export default d.View.extend({tmpl:(d,c,h,m)=>{let x,g,u,b,w,k,v,_,y,z,P=[],{active:j,cshow:q,buffer:B,song:C,play:D,reset:A,undo:G,ptip:J,ntip:E,mode:F,error:Q}=d;if(x="fey",j&&!q&&(x+=" fez"),g=[c("div",{"mx-view":"~fe/view/mp/channels","mx-change":h+"\x1e_o()",class:x})],u=[],j){let s=B||!C.picture||!D;v=e?[e]:[e=c("div",{_:"_",class:"feH"})],x="feG",s&&(x+=" feac"),A&&(x+=" fead"),w=[c("div",{"mx-click":!B&&C.picture&&h+"\x1e_B()",style:null!=C.picture&&"background-image:url("+m(C.picture)+")",class:x},v)],v=[c(0,0,"\u5206\u7c7b\uff1a"+m(j.name))],w.push(c("div",{class:"feJ","mx-click":h+"\x1e_C()"},v)),y=[c(0,0,m(C.title)+"<"+m(C.artist)+">\u2003\u2003\u2003\u2003")],_=[c("div",n,y)],y=[c(0,0,m(C.title)+"<"+m(C.artist)+">\u2003\u2003\u2003\u2003")],_.push(c("div",n,y)),x="feaa",s&&(x+=" feac"),A&&(x+=" fead"),v=[c("div",{class:x},_)],w.push(c("div",{class:"feK",title:m(C.title)+"<"+m(C.artist)+">"},v)),b=[c("div",o,w)],v=[],_=[c(0,0,"\ue600")],x="fee feP feT",G||(x+=" feR"),v.push(c("i",{"mx-click":G&&h+"\x1e_D()",title:m(J),class:x},_)),B?(t?_=[t]:(y=[c(0,0,"\ue613")],_=[t=c("i",{_:"a",class:"fee feP feQ"},y)]),v.push(..._)):(k="",y=[c(0,0,k+=D?" \ue62d ":" \ue6aa ")],z="\u70b9\u51fb",_=[c("i",{class:"fee feP","mx-click":h+"\x1e_B()",title:z+=D?"\u6682\u505c":"\u64ad\u653e"},y)],v.push(..._)),_=[c(0,0,"\ue600")],v.push(c("i",{class:"fee feP","mx-click":h+"\x1e_q()",title:m(E)},_)),k="",_=[c(0,0,k+="rdm"==F?" \ue6cd ":" \ue61e ")],z="\u6b63\u5728",z+="rdm"==F?"\u968f\u673a\u64ad\u653e":"\u5355\u66f2\u5faa\u73af",v.push(c("i",{class:"fee feP fea_","mx-click":h+"\x1e_E()",title:z},_)),k="",Q?k+=" "+m(Q)+" ":D||B||(k+=" \u70b9\u51fb\u64ad\u653e\u6309\u94ae\u7ee7\u7eed "),_=[c(0,0,k)],v.push(c("span",p,_)),i?v.push(i):v.push(i=c("div",{_:"b","mx-view":"~fe/view/mp/volume",class:"fed feU"})),w=[c("div",l,v)],a?w.push(a):w.push(a=c("div",{_:"c","mx-view":"~fe/view/mp/time",class:"fed"})),b.push(c("div",f,w)),r?b.push(r):b.push(r=c("div",{_:"d","mx-view":"~fe/view/mp/lyric",class:"feM"})),u.push(...b)}return g.push(c("div",s,u)),x="fex",j&&(x+=" fez"),P.push(c("div",{class:x},g)),c(h,0,P)},init(){c.on("_p",()=>{if("rdm"==this.get("mode")){let e=this.get("active");c._q(e.channel_id)}else c._r()}),c.on("_s",e=>{let t={};d.has(e,"play")&&(t.play=e.play),d.has(e,"buffer")&&(t.buffer=e.buffer),this.digest(t)}),c.on("_t",()=>{this.set({reset:!1}),this.render()}),c.on("_u",e=>{this.digest({reset:!0,song:e.song})}),this.set({cshow:!1,reset:!0,mode:"rdm",song:{title:"\u8f6f\u4ef6\u4f5c\u8005",artist:"\u884c\u5217"}})},render(){this.digest({ptip:c._v(),ntip:c._w(),undo:c._x()})},_A(){this.get("play")?c._y():c._z()},"_o<change>"(e){this.digest({active:e.channel}),c._q(e.channel.channel_id,!0)},"_B<click>"(){this._A()},"_C<click>"(){this.digest({cshow:!this.get("cshow")})},"_q<click>"(){let e=this.get("active");c._q(e.channel_id)},"_D<click>"(){c._D()},"_E<click>"(){"rdm"==this.get("mode")?this.digest({mode:"circle"}):this.digest({mode:"rdm"})},"$doc<keyup>"(e){if(c._F()){let t=e.keyCode;if(13==t||32==t)this._A();else if(80==t)c._D();else if(78==t){let e=this.get("active");c._q(e.channel_id)}else 67==t&&this.digest({cshow:!this.get("cshow")})}},"$doc<visibilitychange>"(){c._G(document.hidden)}});