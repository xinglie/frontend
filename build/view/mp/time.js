/*!1.0.2 kooboy_li@163.com*/
import"../../gallery/mx-slider/index.js";let e={class:"feQ"};import t from"../../lib/magix.js";import r from"./player.js";let i=new t.Cache(500,100),s=e=>{if(e|=0,i.has(e))return i.get(e);let t=e/60|0,r=e-60*t,s=("0"+t).slice(-2)+":"+("0"+r).slice(-2);return i.set(e,s),s};export default t.View.extend({tmpl:(t,r,i,s,u,a,n)=>{let d,o=[],{current:f,duration:l,buffered:c,format:p}=t;return o.push(r("div",{$:"current,duration,buffered",class:"feM","mx-update":i+"\x1e_a_()","mx-change":i+"\x1e_aa()","mx-view":"~fe/gallery/mx-slider/index?value="+n(a,f/l)+"&buffer=true&bufferValue="+n(a,c)})),d=[r(0,0,s(p(f))+" / "+s(p(l)))],o.push(r("span",e,d)),r(i,0,o)},init(){this.set({duration:0,current:0,buffered:0,format:s}),r.on("_M",e=>{this.get("stop")||this.digest({duration:e.duration,current:e.current,buffered:e.buffered})})},render(){this.digest()},"_a_<update>"(e){this.digest({stop:!0,current:this.get("duration")*e.percent})},"_aa<change>"(e){this.set({stop:!1});let t=this.get("duration")*e.percent;r._Z(t)},"$doc<keydown>"(e){let{duration:t,current:i}=this.get();37==e.keyCode?i-=5:39==e.keyCode&&(i+=5),i<0?i=0:i>t&&(i=t),r._Z(i)}});